<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Documentos Acadêmicos - IPEN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .campo-grupo[data-visible="false"] { display: none; }
        .flash-error { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <img src="{{ url_for('static', filename='ipen_logo_azul.jpg') }}" alt="Logo IPEN" class="mx-auto h-20 mb-4">
            <h1 class="text-3xl font-bold text-gray-800">Gerador de Documentos Acadêmicos</h1>
            <p class="text-gray-600 mt-2">Preencha os campos abaixo para gerar os documentos do seu trabalho.</p>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash-{{ category }} p-4 mb-4 border rounded" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form action="/" method="POST" class="bg-white p-8 rounded-lg shadow-lg space-y-8">
            
            <fieldset class="border-t pt-6">
                <legend class="text-xl font-semibold text-gray-700 mb-4">1. Documentos para Gerar</legend>
                <div id="documentos-container" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    {% for doc_id, doc_name in [('capa', 'Capa'), ('pagina_rosto', 'Página de Rosto'), ('ficha', 'Ficha Catalográfica'), ('resumo', 'Resumo'), ('abstract', 'Abstract'), ('contracapa', 'Contracapa')] %}
                    <label class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 cursor-pointer">
                        <input type="checkbox" name="documentos" value="{{ doc_id }}" class="form-checkbox h-5 w-5 text-blue-600" checked>
                        <span class="text-gray-800">{{ doc_name }}</span>
                    </label>
                    {% endfor %}
                </div>
            </fieldset>

            <!-- A estrutura completa do formulário HTML com todos os campos seria inserida aqui -->
            <!-- Por brevidade, apenas um exemplo é mostrado -->
            <fieldset class="border-t pt-6">
                 <legend class="text-xl font-semibold text-gray-700 mb-4">2. Dados Gerais</legend>
                 <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label for="titulo" class="block text-sm font-medium text-gray-700 mb-1">Título do Trabalho</label>
                        <textarea id="titulo" name="titulo" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>{{ dados.titulo or '' }}</textarea>
                    </div>
                    <div>
                        <label for="nome_completo" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo do Autor</label>
                        <input type="text" id="nome_completo" name="nome_completo" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required value="{{ dados.nome_completo or '' }}">
                    </div>
                    <!-- Adicione todos os outros campos aqui (sobrenome, ano, etc.) -->
                 </div>
            </fieldset>
            
            <div class="border-t pt-6 text-center">
                <button type="submit" class="bg-blue-700 hover:bg-blue-800 text-white font-bold py-3 px-8 rounded-lg shadow-md transition-transform transform hover:scale-105">
                    Gerar Documentos
                </button>
            </div>
        </form>
    </div>

    <!-- O JavaScript para mostrar/ocultar campos pode ser adicionado aqui se necessário -->
</body>
</html>